# 2.对象创建过程

1.类加载检查

2.分配内存

3.初始化零值

4.设置对象头

5.执行init方法

## 对象的访问定位有哪两种方式

1.句柄：如果使用句柄，Java堆中将会划分出一块内存来作为句柄池，reference中存储的就是对象的句柄地址，句柄中包含了对象实例数据与类型数据各自的具体地址信息

2.直接指针：如果使用直接指针访问，Java堆对象的布局中必须考虑如何放置访问类型数据的相关信息，而reference中存储的直接就是对象的地址

## 判断对象是否被引用

1.引用计数法：给对象中添加一个引用计数器，每当有一个地方引用它，计数器加1；当引用失效，计数器减1；任何时候计数器为0的对象是不可能再被使用的

2.可达性分析算法：“GC Roots”的对象作为起点，这些节点向下搜索，节点所过的路径成为引用链，当一个对象到GC Roots没有任何引用链相连的话，则证明此对象是不可用的

## 判断一个类是无用的类

1.该类所有的实例都已经被回收，即Java堆中不存在该类的任何实例

2.加载该类的ClassLoader已经被回收

3.该类对应的java.lang.Class对象没有被任何地方引用，无法在任何地方通过反射访问该类的方法

## 垃圾收集有哪些算法

1.标记-清除算法：首先标记所有需要回收的对象，在标记完成后统一回收所有被标记的对象

2.复制算法：将内存分为大小相同的两块，每次使用其中一块，当这一块的内存使用完后，就将还存活的对象复制到另一块，然后再把使用的空间一次清理掉，则又恢复到两块内存的状态

3.标记-整理算法：首先标记所有需要回收的对象，在标记完成后让所有存活的对象向一端移动，然后直接清理掉端边界以外的内存

4.分代收集算法，新生代采用复制算法，因为每次收集都有大量的对象被清理掉；老年代的对象存活几率是比较高的，而且没有额外的空间对它进行分配担保，所以选择标记清除算法