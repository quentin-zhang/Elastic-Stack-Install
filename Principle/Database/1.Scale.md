# 1.数据库扩容

## 从库升级法（成倍扩容）

1. 原本有4个库，分别是2主2从，共有一个VIP虚拟地址，代码中有2个datasource，
2. 添加1个VIP虚拟地址，并让其也指向主库，由2个datasource变为4个datasource
3. 添加4个库，双VIP整合成单VIP；原来的4个库作为master主库，新加的4个库作为从库；
4. 删除冗余数据

## 双写迁移扩容法

1. 修改配置和代码，改为双写数据源
2. 将老库中的数据复制到新库中
3. 以老库为准校对新库中的老数据
4. 修改应用配置和代码，去掉双写，部署