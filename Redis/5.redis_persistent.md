# 5.redis持久化两种方式

1.RDB:对Redis中的数据执行**周期性**的持久化
2.AOF:对每条写入命令作为日志,以`append-only`的模式写入一个日志文件中,在Redis重启的时候，可以通过回放AOF日志中的写入指令来重构整个数据集
3.如果同时使用RDB和AOF两种持久化机制，那么在Redis重启的时候，会使用AOF来重新构建数据，因为AOF中的**数据更加完整**
4.RDB会生成多个数据文件，每个数据文件都代表了某一个时刻中的Redis的数据，这种多个数据文件的方式，**非常适合做冷备**
5.RDB对Redis对外提供读写服务，影响非常小，可以让Redis保持高性能，因为Redis主进程只需要fork一个子进程，让子进程执行磁盘IO操作来进行RDB持久化即可
6.相对于AOF持久化机制来说，直接基于RDB数据文件来重启和恢复Redis进程，更加快速
7.一般RDB快照文件，每隔5分钟一次，一旦在期间宕机，最多可丢失5分钟的数据
8.RDB每次在fork子进程来执行RDB快照生成数据文件的时候，如果数据文件特别大，可能会导致对客户端提供的服务暂停数秒
9.AOF一般会每隔1秒，通过一个后台线程执行一次fsync操作，最多丢失1秒的数据
10.AOF以`append-only`模式写入，所以没有任何磁盘寻址的开销，写入性能非常高
11.不要仅用RDB，也不要仅用AOF，应当两种持久化配合使用，用AOF来保证数据不丢失，作为数据恢复的第一选择，用RDB来做不同程度的冷备，在AOF文件都丢失或损坏不可用的时候，还可以使用RDB来进行快速的数据恢复
