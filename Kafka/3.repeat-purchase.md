# 3.重复消费

1.写入数据库之前用主键查一下，如果数据已有，改为update
2.如果写入的是redis，没问题，直接set即可，天然幂等性
3.生产者发送数据的时候生成一个全局唯一ID，消费者写入redis之前先根据ID查一下，如果消费过了，就不必处理了
4.基于数据库做唯一键来保证不会重复插入，重复插入的时候报异常，不会插进去