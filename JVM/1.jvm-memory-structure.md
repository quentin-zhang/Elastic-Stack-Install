# 1.JVM的组成

## JDK1.6之前

### 线程共享内存（堆）

堆内存，放置对象的地方

方法区，存放类的加载信息，常量、静态变量，即时编译器编译后的代码

### 线程持有内存

程序计数器 标记运行时线程执行的地址，记录分支、循环等跳转的地址,唯一的不会出现outofmemory的内存区域

JAVA虚拟机栈 存放对象的引用
JAVA虚拟机栈会为每一个即将运行的java方法创建一块叫做“栈帧”的区域，用于存放该方法运行过程中的一些信息，如：

* 局部变量表，随着线程的创建而创建，大小在编译的时候就确定了，创建时只需分配事先规定的大小即可；方法运行过程中，局部变量表的大小不变
* 操作数栈
* 动态链接
* 方法出口信息
  * JAVA虚拟机栈会出现两种异常:StackOverFlowError和OutOfMemoryError,StackOverFlowError
  * StackOverFlowError:若Java虚拟机栈的大小不允许动态扩展，那么当线程请求栈

本地方法栈 存放native程序的引用s

## JDK1.8之后

### 虚拟机数据区外

元数据区

直接内存

不同点：1.8之后使用元数据区取代了永久带，元数据的空间并不在虚拟机中，而是使用本地内存
